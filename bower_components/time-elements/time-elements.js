(function(){'use strict';function a(x){return('0'+x).slice(-2)}function b(x){if('Intl'in window)try{return new window.Intl.DateTimeFormat(void 0,x)}catch(y){if(!(y instanceof RangeError))throw y}}function c(x,y){var z=x.getDay(),A=x.getDate(),B=x.getMonth(),C=x.getFullYear(),D=x.getHours(),E=x.getMinutes(),F=x.getSeconds();return y.replace(/%([%aAbBcdeHIlmMpPSwyYZz])/g,function(G){var H,I=G[1];switch(I){case'%':return'%';case'a':return m[z].slice(0,3);case'A':return m[z];case'b':return n[B].slice(0,3);case'B':return n[B];case'c':return x.toString();case'd':return a(A);case'e':return A;case'H':return a(D);case'I':return a(c(x,'%l'));case'l':return 0===D||12===D?12:(D+12)%12;break;case'm':return a(B+1);case'M':return a(E);case'p':return 11<D?'PM':'AM';break;case'P':return 11<D?'pm':'am';break;case'S':return a(F);case'w':return z;case'y':return a(C%100);case'Y':return C;case'Z':return H=x.toString().match(/\((\w+)\)$/),H?H[1]:'';case'z':return H=x.toString().match(/\w([+-]\d\d\d\d) /),H?H[1]:'';}})}function d(x){this.date=x}function f(){if(null!==o)return o;var x=b({day:'numeric',month:'short'});if(x){var y=x.format(new Date(0));return o=!!y.match(/^\d/),o}return!1}function g(){if(null!==p)return p;var x=b({day:'numeric',month:'short',year:'numeric'});if(x){var y=x.format(new Date(0));return p=!!y.match(/\d,/),p}return!0}function h(x){var y=new Date;return y.getUTCFullYear()===x.getUTCFullYear()}function j(){var x,y,z;for(y=0,z=q.length;y<z;y++)x=q[y],x.textContent=x.getFormattedDate()}function k(x){var y={weekday:{short:'%a',long:'%A'},day:{numeric:'%e',"2-digit":'%d'},month:{short:'%b',long:'%B'},year:{numeric:'%Y',"2-digit":'%y'}},z=f()?'weekday day month year':'weekday month day, year';for(var A in y){var B=y[A][x.getAttribute(A)];z=z.replace(A,B||'')}return z=z.replace(/(\s,)|(,\s$)/,''),c(x._date,z).replace(/\s+/,' ').trim()}function l(x){var y={hour:x.getAttribute('hour'),minute:x.getAttribute('minute'),second:x.getAttribute('second')};for(var z in y)y[z]||delete y[z];if(0!==Object.keys(y).length){var A=b(y);if(A)return A.format(x._date);var B=y.second?'%H:%M:%S':'%H:%M';return c(x._date,B)}}var m=['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],n=['January','February','March','April','May','June','July','August','September','October','November','December'];d.prototype.toString=function(){var x=this.timeElapsed();if(x)return x;var y=this.timeAhead();return y?y:'on '+this.formatDate()},d.prototype.timeElapsed=function(){var x=new Date().getTime()-this.date.getTime(),y=Math.round(x/1e3),z=Math.round(y/60),A=Math.round(z/60),B=Math.round(A/24);return 0<=x&&30>B?this.timeAgoFromMs(x):null},d.prototype.timeAhead=function(){var x=this.date.getTime()-new Date().getTime(),y=Math.round(x/1e3),z=Math.round(y/60),A=Math.round(z/60),B=Math.round(A/24);return 0<=x&&30>B?this.timeUntil():null},d.prototype.timeAgo=function(){var x=new Date().getTime()-this.date.getTime();return this.timeAgoFromMs(x)},d.prototype.timeAgoFromMs=function(x){var y=Math.round(x/1e3),z=Math.round(y/60),A=Math.round(z/60),B=Math.round(A/24),C=Math.round(B/30),D=Math.round(C/12);return 0>x?'just now':10>y?'just now':45>y?y+' seconds ago':90>y?'a minute ago':45>z?z+' minutes ago':90>z?'an hour ago':24>A?A+' hours ago':36>A?'a day ago':30>B?B+' days ago':45>B?'a month ago':12>C?C+' months ago':18>C?'a year ago':D+' years ago'},d.prototype.microTimeAgo=function(){var x=new Date().getTime()-this.date.getTime(),y=Math.round(x/1e3),z=Math.round(y/60),A=Math.round(z/60),B=Math.round(A/24),C=Math.round(B/30),D=Math.round(C/12);return 1>z?'1m':60>z?z+'m':24>A?A+'h':365>B?B+'d':D+'y'},d.prototype.timeUntil=function(){var x=this.date.getTime()-new Date().getTime();return this.timeUntilFromMs(x)},d.prototype.timeUntilFromMs=function(x){var y=Math.round(x/1e3),z=Math.round(y/60),A=Math.round(z/60),B=Math.round(A/24),C=Math.round(B/30),D=Math.round(C/12);return 18<=C?D+' years from now':12<=C?'a year from now':45<=B?C+' months from now':30<=B?'a month from now':36<=A?B+' days from now':24<=A?'a day from now':90<=z?A+' hours from now':45<=z?'an hour from now':90<=y?z+' minutes from now':45<=y?'a minute from now':10<=y?y+' seconds from now':'just now'},d.prototype.microTimeUntil=function(){var x=this.date.getTime()-new Date().getTime(),y=Math.round(x/1e3),z=Math.round(y/60),A=Math.round(z/60),B=Math.round(A/24),C=Math.round(B/30),D=Math.round(C/12);return 365<=B?D+'y':24<=A?B+'d':60<=z?A+'h':1<z?z+'m':'1m'};var o=null,p=null;d.prototype.formatDate=function(){var x=f()?'%e %b':'%b %e';return h(this.date)||(x+=g()?', %Y':' %Y'),c(this.date,x)},d.prototype.formatTime=function(){var x=b({hour:'numeric',minute:'2-digit'});return x?x.format(this.date):c(this.date,'%l:%M%P')};var q=[],r,s=Object.create(window.HTMLElement.prototype);s.attributeChangedCallback=function(x,y,z){if('datetime'===x){var A=Date.parse(z);this._date=isNaN(A)?null:new Date(A)}var B=this.getFormattedTitle();B&&this.setAttribute('title',B);var C=this.getFormattedDate();C&&(this.textContent=C)},s.getFormattedTitle=function(){if(this._date){if(this.hasAttribute('title'))return this.getAttribute('title');var x=b({day:'numeric',month:'short',year:'numeric',hour:'numeric',minute:'2-digit',timeZoneName:'short'});if(x)return x.format(this._date);try{return this._date.toLocaleString()}catch(y){if(y instanceof RangeError)return this._date.toString();throw y}}};var t=Object.create(s);t.createdCallback=function(){var x=this.getAttribute('datetime');x&&this.attributeChangedCallback('datetime',null,x)},t.getFormattedDate=function(){if(this._date)return new d(this._date).toString()},t.attachedCallback=function(){q.push(this),r||(j(),r=setInterval(j,60000))},t.detachedCallback=function(){var x=q.indexOf(this);-1!==x&&q.splice(x,1),!q.length&&r&&(clearInterval(r),r=null)};var u=Object.create(t);u.getFormattedDate=function(){if(this._date){var x=this.getAttribute('format');return'micro'===x?new d(this._date).microTimeAgo():new d(this._date).timeAgo()}};var v=Object.create(t);v.getFormattedDate=function(){if(this._date){var x=this.getAttribute('format');return'micro'===x?new d(this._date).microTimeUntil():new d(this._date).timeUntil()}};var w=Object.create(s);w.createdCallback=function(){var x;(x=this.getAttribute('datetime'))&&this.attributeChangedCallback('datetime',null,x),(x=this.getAttribute('format'))&&this.attributeChangedCallback('format',null,x)},w.getFormattedDate=function(){if(this._date){var x=k(this)||'',y=l(this)||'';return(x+' '+y).trim()}},window.RelativeTime=d,window.TimeAgoElement=u,window.TimeUntilElement=v,window.LocalTimeElement=w})();
